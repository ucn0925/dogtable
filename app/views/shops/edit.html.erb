<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm">
        <div class="card-body">
         
         <h1 class="h4 text-center mb-4">店舗情報を編集する</h1>

          <%= render "form", shop: @shop %>

          <hr class="my-4">

          <h3 class="h6 mb-3">登録済みの画像</h3>

          <% if @shop.images.attached? %>
            <div class="d-flex flex-wrap gap-3 ">
              <% @shop.images.each do |image| %>
                  <div class="position-relative">
                    <%= image_tag image.variant(resize_to_limit: [200, 200]).processed,
                                  class: "rounded shadow-sm",
                                  style: "width: 200px; height: 200px; object-fit: cover;" %>

                    <%= link_to "×", 
                          destroy_image_shop_path(image.id),
                          data: { 
                            turbo_method: :delete, 
                            turbo_confirm: "この画像を削除してよろしいですか？" 
                          },
                          class: "btn btn-sm btn-danger position-absolute top-0 end-0 m-1 rounded-circle",
                          style: "line-height: 1; padding: 0.25rem 0.5rem;" %>
                  </div>
              <% end %>
            </div>
          <% else %>
           <p class="text-muted">登録された画像はありません。</p>
          <% end %>

          <div class="text-center mt-4">
            <%= link_to "← 店舗詳細に戻る", shop_path(@shop), class: "text-decoration-none" %>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY'] %>"></script>
