<%# app/views/shops/_form.html.erb %>

<% if shop.errors.any? %>
  <div class="alert alert-danger mb-4">
    <h5 class="mb-2">
      <%= shop.errors.count %>件のエラーがあります
    </h5>
    <ul class="mb-0">
      <% shop.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%= form_with model: shop, local: true do |f| %>
  <!-- 店名 -->
  <div class="mb-3">
    <%= f.label :name, "店名", class: "form-label" %>
    <span class="text-danger"> *</span>
    <%= f.text_field :name, class: "form-control" %>
  </div>

  <!-- 住所 -->
  <div class="mb-3">
    <%= f.label :address, "住所", class: "form-label" %>
    <span class="text-danger"> *</span>
    <%= f.text_field :address, 
          class: "form-control",
          id: "shop-address" %>
  </div>

    <%# 緯度・経度（hidden） %>
    <%= f.hidden_field :latitude, id: "shop-latitude" %>
    <%= f.hidden_field :longitude, id: "shop-longitude" %>

    <!-- ジャンル -->
    <div class="mb-3">
      <%= f.label :genre_id, "ジャンル", class: "form-label" %>
      <span class="text-danger"> *</span>
      <%= f.collection_select :genre_id, 
            Genre.all, :id, :name, 
            { prompt: "ジャンルを選択してください" },
            { class: "form-select" } %>
    </div>

    <!-- 店舗写真 -->
    <div class="mb-3">
      <%= f.label :images, "店舗の写真", class: "form-label" %>
      <%= f.file_field :images, 
            multiple: true, 
            accept: "image/*",
            class: "form-control" %>
    </div>

    <!-- エリア（ブロック） -->
    <div class="mb-3">
      <%= f.label :block_id, "地域ブロックID", class: "form-label" %>
      <span class="text-danger"> *</span>
      <%= f.collection_select :block_id, 
            Block.all, :id, :name, 
            { prompt: "エリアを選択してください" },
            { class: "form-select" } %>
    </div>

    <!-- 市町村 -->
    <div class="mb-3">
      <%= f.label :city_id, "市町村", class: "form-label" %>
      <%= f.collection_select :city_id, 
            City.all, :id, :name, 
            { prompt: "市町村を選択してください" },
            { class: "form-select" } %>
    </div>

    <!-- 営業時間 -->
    <div class="mb-3">
      <%= f.label :opening_hours, "営業時間", class: "form-label" %>
      <%= f.text_field :opening_hours, 
            class: "form-control",
            placeholder: "例）10:00〜18:00" %>
    </div>

    <!-- 定休日 -->
    <div class="mb-3">
      <%= f.label :closed_days, "定休日", class: "form-label" %>
      <%= f.text_field :closed_days, 
            class: "form-control",
            placeholder: "例）火曜・水曜" %>
    </div>

    <!-- 駐車場 -->
    <div class="form-check mb-4">
      <%= f.check_box :parking, class: "form-check-input" %>
      <%= f.label :parking, "駐車場あり", class: "form-check-label" %>
    </div>

    <!-- 犬連れ情報 -->
    <h5 class="mt-4 mb-3">犬連れ情報</h5>

    <div class="form-check mb-2">
      <%= f.check_box :inside_ok, class: "form-check-input" %>
      <%= f.label :inside_ok, "店内同伴OK", class: "form-check-label" %>
    </div>

    <div class="form-check mb-2">
      <%=f.check_box :terrace_ok, class: "form-check-input" %>
      <%= f.label :terrace_ok, "テラスOK", class: "form-check-label" %>
    </div>

    <div class="form-check mb-2">
      <%= f.check_box :dog_menu, class: "form-check-input" %>
      <%= f.label :dog_menu, "犬用メニューあり" %>
    </div>

    <div class="form-check mb-4">
      <%= f.check_box :lead_hook, class: "form-check-input" %>
      <%= f.label :lead_hook, "リードフックあり", class: "form-check-label" %>
    </div>

    <!-- 必須項目 -->
    <p class="text-muted small">
      <span class="text-danger">* </span>は必須項目です
    </p>

    <!-- 送信ボタン -->
    <div  class="mt-4 d-grid gap-2">
      <%= f.submit shop.new_record? ? "登録する" : "更新する",
            class: "btn btn-primary btn-lg" %>
    </div>

    <!-- 一覧に戻る -->
    <div class="mt-3 text-center">
      <%= link_to "← 一覧に戻る", shops_path,
            class: "text-decoration-none text-muted" %>
    </div>

<% end %>

