<div class="container mt-4">

  <h2 class="mb-4"><%= @user.name %>さんをフォローしているユーザー</h2>

  <% if @users.any? %>
    <div class="list-group"> 

      <% @users.each do |u| %>
        <div class="list-group-item d-flex justify-content-between align-items-center py-3">

          <!-- 左側（アイコン ＋ 名前） -->
          <div class="d-flex align-items-center">

            <% if u.profile_image.attached? %>
              <%= image_tag u.profile_image.variant(resize_to_fill: [50, 50]), 
                  class: "rounded-circle me-3 border",
                  style: "width: 50px; height: 50px; object-fit: cover;" %>
            <% else %>
              <%= image_tag "default_user.png", 
                  class: "rounded-circle me-3 border", 
                  style: "width: 50px; height: 50px; object-fit: cover;" %>
            <% end %>

            <%= link_to u.name, user_path(u), 
                class: "fw-bold text-decoration-none text-dark" %>
          </div>

          <!-- 右側（フォローボタン） -->
          <div>
            <% if current_user.following?(u) %>
              <% rel = current_user.active_relationships.find_by(followed_id: u.id) %>
              <%= button_to "フォロー解除",
                    user_relationship_path(current_user, rel.id),
                    method: :delete,
                    class: "btn btn-outline-secondary btn-sm",
                    data: { turbo: false } %>
                  
            <% else %>

                <%= button_to "フォローする",
                      user_relationships_path(current_user, followed_id: u.id),
                      method: :post,
                      class: "btn btn-primary btn-sm",
                      data: { turbo: false } %>
              
            <% end %>
          </div>

        </div>
      <% end %>
    </div>
  <% else %>
    <p>フォロワーはいません。</p>
  <% end %>

</div>