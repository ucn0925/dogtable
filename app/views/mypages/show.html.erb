<h1><%= @user.name %>さんのマイページ</h1>

<p>
  💬投稿数：<%= @posts.count %>件<br>
  ♡お気に入り店舗数：<%= @favorites.count %>件
</p>

<hr>

<h2>プロフィール</h2>
<p>自己紹介：<%= @user.profile.presence || "未設定" %></p>

<% if @user.profile_image.attached? %>
  <%= image_tag @user.profile_image, size: "150x150", class: "rounden-full" %>
<% else %>
  <p>プロフィール画像はまだ設定されていません。</p>
<% end %>

<%= link_to "プロフィールを編集する", edit_user_registration_path, class: "btn" %>

<hr>

<h2>愛犬情報</h2>
<% if @user.dog.present? %>
  <p>犬の名前：<%= @user.dog.name %></p>
  <p>犬種：<%= @user.dog.breed %></p>
  <p>犬のサイズ：<%= @user.dog.size_jp %></p>

  <% if @user.dog.dog_image.attached? %>
    <%= image_tag @user.dog.dog_image, size: "200x200" %>
  <% else %>
    <p>愛犬の写真はまだ登録されていません。</p>
  <% end %>
<% else %>
  <p>愛犬情報はまだ登録されていません。</p>
<% end %>

<hr>

<h2>お気に入り店舗一覧</h2>
<% if @favorites.any? %>
  <ul>
    <% @favorites.each do |favorite| %>
        <li>
          <%= link_to favorite.shop.name, shop_path(favorite.shop) %>
        </li>
    <% end %>
  </ul>
<% else %>
  <p>お気に入り登録した店舗はまだありません。</p>
<% end %>

<hr>

<h2>投稿一覧</h2>
<% if @posts.any? %>
  <ul>
    <% @posts.each do |post| %>
        <li style="margin-bottom: 12px;">
          <strong><%= link_to post.shop.name, shop_path(post.shop) %></strong><br>
          投稿日：<%= post.created_at.strftime("%Y/%m/%d %H:%M") %><br>
          評価：
          <% (1..5).each do |i| %>
            <span style="color: <%= i <= (post.rating_overall || 0) ? 'gold' : '#ccc' %>;" >★</span>
          <% end %>
          <br>
          <%= simple_format(post.content) %>       
        </li>
    <% end %>
  </ul>
<% else %>
  <p>投稿はまだありません。</p>
<% end %>

   
